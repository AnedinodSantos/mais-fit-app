{% extends "base.html" %}
{% load static %}

{% block header %}
    {% include 'partials/_header.html' %}
    <!-- Carrossel -->
    <div class="container">
        <div id="carouselMain" class="carousel slide carousel-dark" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselMain" data-bs-slide-to="0" class="active"></button>
                <button type="button" data-bs-target="#carouselMain" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#carouselMain" data-bs-slide-to="2"></button>
            </div>
            <!-- colocar as imagens do carrossel no S3 -->
            <div class="carousel-inner">
                <div class="carousel-item active" data-bs-interval="3000">
                    <img src="{% static 'img/marmitas-banner.jpg' %}" class="d-none d-md-block w-100" alt="">
                    <img src="{% static 'img/marmitas-banner-small.jpg' %}" class="d-block d-md-none w-100" alt="">
                </div>
                <div class="carousel-item" data-bs-interval="3000">
                    <img src="{% static 'img/marmitas-banner.jpg' %}" class="d-none d-md-block w-100" alt="">
                    <img src="{% static 'img/marmitas-banner-small.jpg' %}" class="d-block d-md-none w-100" alt="">
                </div>
                <div class="carousel-item" data-bs-interval="3000">
                    <img src="{% static 'img/marmitas-banner.jpg' %}" class="d-none d-md-block w-100" alt="">
                    <img src="{% static 'img/marmitas-banner-small.jpg' %}" class="d-block d-md-none w-100" alt="">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselMain" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
                <span class="visually-hidden">Anterior</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselMain" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
                <span class="visually-hidden">Próximo</span>
            </button>
        </div>
        <hr class="mt-3">
    </div>
{% endblock %}

{% block content %}
    <div class="row pb-3">
        <h1>Escolha seu kit</h1>
    </div>

    <div class="row g-3">
        {% for kit in kits %}
            <div class="col-sm-6 col-lg-3">
                <div class="card text-center bg-light h-100" data-kitid="{{ kit.id }}">
                    <!-- Ícone do card -->
                    <i class="bi-bag position-absolute end-0 p-2 text-success" style="font-size: 24px; line-height: 24px;"></i>
                    <!-- Imagem ilustrativa -->
                    <img src="{% static 'img/'|add:kit.link_img %}" class="card-img-top" data-link="{{ kit.link_img }}">
                    <!-- Card header -->
                    <div class="card-header" data-valor="{{ kit.valor }}">
                        <!-- Converter o ponto para virgula -->
                        R$ {{ kit.valor }}
                    </div>
                    <!-- FIM Card header -->
                    <!-- Card Body -->
                    <div class="card-body">
                        <!-- Na tabela kit deve haver um campo de descrição -->
                        <h5 class="card-title" data-titulo="{{ kit.titulo }}" >{{ kit.titulo }}</h5>
                        <p class="card-text truncar-3l" data-descricao >
                            {{ kit.descricao }}
                        </p>
                    </div>
                    <!-- FIM Card Body -->
                    <!-- Card Footer -->
                    <div class="card-footer" data-qtd="{{ kit.qtd_marmitas }}">
                        <!-- Deve levar à tela de marmitas -->
                        <a href="#" class="btn btn-success mt-2 d-block text-warning" data-bs-toggle="modal" data-bs-target="#exampleModal" data-escolher>
                            Escolher este
                        </a>
                    </div>
                    <!-- FIM Card Footer -->
                </div>
            </div>
        {% endfor %}

    </div>

    <hr mt-3>

    <div class="row pt-3">
        <img class="img-fluid" src="{% static 'img/imagem-ilustrativa.jpg' %}" alt="">
    </div>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Escolha as marmitas do seu kit</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" data-modal-marmita-close aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="custon-sticky card bg-light border-primary" data-modalkit>
                        <div class="row g-0">
                            <div class="col-4">
                                <img src="" class="card-img img-kit" alt="..." data-modal-kit-img>
                            </div>
                            <div class="col-8">
                                <div class="card-body text-end">
                                    <h5 class="card-title" data-modal-kit-titulo></h5>
                                    <p class="card-text" data-modal-kit-descr></p>
                                    <p class="card-text" data-modal-kit-valor></p>
                                    <span style="display: inline-block;"><small class="text-muted">Você pode revisar as marmitas no carrinho.</small></span>
                                    <input class="text-center w-25" type="text" data-modal-kit-qtd value="0" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-success float-end" data-modal-btn-carrinho data-bs-dismiss="modal" disabled>Enviar para carrinho</button>
                        </div>
                    </div>
                    <div class="row g-1">
                    {% for marmita in marmitas %}
                        <div class="col-12 col-sm-6 col-md-6 col-lg-3 col-xl-2">
                            <div class="card text-center bg-light h-100" data-card-marmita-id="{{ marmita.id }}">
                                <div href="#" class="position-absolute end-0 p-2 text-dark" data-placement="top" title="Tooltip na parte superior">
                                    <i class="bi-info-circle" style="font-size: 24px; line-height: 24px;"></i>
                                </div>
                                <div>
                                    <img src="{{ marmita.link_img }}" class="card-img-top h-30" data-card-marmita-img="{{ marmita.link_img }}">
                                </div>
                                <div class="card-body">
                                    <h5 class="card-title" data-card-marmita-titulo="{{ marmita.titulo }}">{{ marmita.titulo }}</h5>
                                    <p class="card-text truncar-3l" data-card-marmita-descricao>
                                        {{ marmita.descricao }}
                                    </p>
                                </div>
                                <div class="card-footer">
                                    <div class="btn-group">
                                        <button class="btn btn-success bi-caret-down" data-controle="-"></button>
                                        <input type="text" readonly class="form-control text-center" id="qtdMarmita" value="0" data-contador style="font-size: 24px; line-height: 24px;">
                                        <button class="btn btn-success bi-caret-up" data-controle="+"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-modal-marmita-close >Close</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block footer %}
    {% include 'partials/_footer.html' %}
{% endblock %}

{% block scripts %}

{% endblock %}